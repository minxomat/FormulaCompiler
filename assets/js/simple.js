function getURLParameter(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function updatePL(){sPermalink="http://turbo.github.io/FormulaCompiler/index.html?src="+encodeURIComponent(editor.getValue())+'#main',document.getElementById("permalink").value=sPermalink}!function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e,t){if(!e.hasOwnProperty(t))throw new Error("Undefined state "+t+" in simple mode")}function n(e,t){if(!e)return/(?:)/;var n="";return e instanceof RegExp?(e.ignoreCase&&(n="i"),e=e.source):e=String(e),new RegExp((t===!1?"":"^")+"(?:"+e+")",n)}function r(e){if(!e)return null;if("string"==typeof e)return e.replace(/\./g," ");for(var t=[],n=0;n<e.length;n++)t.push(e[n]&&e[n].replace(/\./g," "));return t}function o(e,o){(e.next||e.push)&&t(o,e.next||e.push),this.regex=n(e.regex),this.token=r(e.token),this.data=e}function a(e,t){return function(n,r){if(r.pending){var o=r.pending.shift();return 0==r.pending.length&&(r.pending=null),n.pos+=o.text.length,o.token}if(r.local){if(r.local.end&&n.match(r.local.end)){var a=r.local.endToken||null;return r.local=r.localState=null,a}var i,a=r.local.mode.token(n,r.localState);return r.local.endScan&&(i=r.local.endScan.exec(n.current()))&&(n.pos=n.start+i.index),a}for(var d=e[r.state],c=0;c<d.length;c++){var s=d[c],u=(!s.data.sol||n.sol())&&n.match(s.regex);if(u){if(s.data.next?r.state=s.data.next:s.data.push?((r.stack||(r.stack=[])).push(r.state),r.state=s.data.push):s.data.pop&&r.stack&&r.stack.length&&(r.state=r.stack.pop()),s.data.mode&&l(t,r,s.data.mode,s.token),s.data.indent&&r.indent.push(n.indentation()+t.indentUnit),s.data.dedent&&r.indent.pop(),u.length>2){r.pending=[];for(var f=2;f<u.length;f++)u[f]&&r.pending.push({text:u[f],token:s.token[f-1]});return n.backUp(u[0].length-(u[1]?u[1].length:0)),s.token[0]}return s.token&&s.token.join?s.token[0]:s.token}}return n.next(),null}}function i(e,t){if(e===t)return!0;if(!e||"object"!=typeof e||!t||"object"!=typeof t)return!1;var n=0;for(var r in e)if(e.hasOwnProperty(r)){if(!t.hasOwnProperty(r)||!i(e[r],t[r]))return!1;n++}for(var r in t)t.hasOwnProperty(r)&&n--;return 0==n}function l(t,r,o,a){var l;if(o.persistent)for(var d=r.persistentStates;d&&!l;d=d.next)(o.spec?i(o.spec,d.spec):o.mode==d.mode)&&(l=d);var c=l?l.mode:o.mode||e.getMode(t,o.spec),s=l?l.state:e.startState(c);o.persistent&&!l&&(r.persistentStates={mode:c,spec:o.spec,state:s,next:r.persistentStates}),r.localState=s,r.local={mode:c,end:o.end&&n(o.end),endScan:o.end&&o.forceEnd!==!1&&n(o.end,!1),endToken:a&&a.join?a[a.length-1]:a}}function d(e,t){for(var n=0;n<t.length;n++)if(t[n]===e)return!0}function c(t,n){return function(r,o,a){if(r.local&&r.local.mode.indent)return r.local.mode.indent(r.localState,o,a);if(null==r.indent||r.local||n.dontIndentStates&&d(r.state,n.dontIndentStates)>-1)return e.Pass;var i=r.indent.length-1,l=t[r.state];e:for(;;){for(var c=0;c<l.length;c++){var s=l[c];if(s.data.dedent&&s.data.dedentIfLineStart!==!1){var u=s.regex.exec(o);if(u&&u[0]){i--,(s.next||s.push)&&(l=t[s.next||s.push]),o=o.slice(u[0].length);continue e}}}break}return 0>i?0:r.indent[i]}}e.defineSimpleMode=function(t,n){e.defineMode(t,function(t){return e.simpleMode(t,n)})},e.simpleMode=function(n,r){t(r,"start");var i={},l=r.meta||{},d=!1;for(var s in r)if(s!=l&&r.hasOwnProperty(s))for(var u=i[s]=[],f=r[s],p=0;p<f.length;p++){var m=f[p];u.push(new o(m,r)),(m.indent||m.dedent)&&(d=!0)}var h={startState:function(){return{state:"start",pending:null,local:null,localState:null,indent:d?[]:null}},copyState:function(t){var n={state:t.state,pending:t.pending,local:t.local,localState:null,indent:t.indent&&t.indent.slice(0)};t.localState&&(n.localState=e.copyState(t.local.mode,t.localState)),t.stack&&(n.stack=t.stack.slice(0));for(var r=t.persistentStates;r;r=r.next)n.persistentStates={mode:r.mode,spec:r.spec,state:r.state==t.localState?n.localState:e.copyState(r.mode,r.state),next:n.persistentStates};return n},token:a(i,n),innerMode:function(e){return e.local&&{mode:e.local.mode,state:e.localState}},indent:c(i,l)};if(l)for(var g in l)l.hasOwnProperty(g)&&(h[g]=l[g]);return h}}),$("a").click(function(){return $("html, body").animate({scrollTop:$($(this).attr("href")).offset().top},500),!1}),CodeMirror.defineSimpleMode("fc",{start:[{regex:/(?:function|var|array|if|return|endif|let|goto|isprime|prime|abs)\b/,token:"keyword"},{regex:/\d/i,token:"number"},{regex:/\/\/.*/,token:"comment"}]});var editor=CodeMirror.fromTextArea(document.getElementById("pseudocode"),{mode:"fc",theme:"mbo"}),Module,out=document.getElementById("joutput"),ldsec=document.getElementById("loader");editor.on("change",function(e,t){out.style.visibility="hidden",ldsec.innerHTML='<i class="fa fa-circle-o-notch fa-spin fa-3x fa-fw margin-bottom"></i>',Module={arguments:[editor.getValue().replace(/(?:\r\n|\r|\n)/g,"|")],print:function(){return out&&(out.value=""),function(e){var t=~e.indexOf("...Where:");e=t?e.replace("...Where:","\\[\\text {...Where:}\\]"):'<b style="color:red">'+e.replace("sum_{i=1}^{infinity}(1)","\\[sum_{i=1}^{infinity}(1)\\]")+"</b>",out.innerHTML=e,MathJax.Hub.queue.Push(["Typeset",MathJax.Hub],function(){out.style.visibility="",ldsec.innerHTML=""})}}()};var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src","assets/js/fbc.min.js"),document.head.appendChild(n),updatePL()});var codeFromURL=getURLParameter("src");null!==codeFromURL&&editor.setValue(codeFromURL);
